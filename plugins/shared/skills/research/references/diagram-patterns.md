Use when: Writing REPORT.md (Step 4) and need architecture, data flow, or deployment diagrams
Priority: P2
Impact: Without this, diagrams may be inconsistent or use incompatible characters

---

# ASCII Diagram Patterns

Reusable ASCII diagram templates for technical research reports. Use box-drawing characters for consistency and portability.

---

## Box Drawing Characters Reference

```
Corners:  ┌ ┐ └ ┘
Lines:    ─ │
T-joins:  ┬ ┴ ├ ┤
Cross:    ┼
Arrows:   → ← ↑ ↓ ▶ ◀ ▲ ▼
Heavy:    ═ ║ ╔ ╗ ╚ ╝
```

---

## Architecture Diagrams

### Component Layout (Horizontal)

```
┌─────────────────────────────────────────────────────────────┐
│                        System Name                           │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│  │ Service  │───▶│ Service  │───▶│ Service  │              │
│  │    A     │    │    B     │    │    C     │              │
│  └──────────┘    └──────────┘    └──────────┘              │
└─────────────────────────────────────────────────────────────┘
```

### Component Layout (Vertical Layers)

```
┌─────────────────────────────────────────┐
│           Presentation Layer             │
│  ┌─────────────┐  ┌─────────────┐       │
│  │    Web UI   │  │   Mobile    │       │
│  └──────┬──────┘  └──────┬──────┘       │
└─────────┼────────────────┼──────────────┘
          │                │
          ▼                ▼
┌─────────────────────────────────────────┐
│              API Layer                   │
│  ┌─────────────────────────────────┐    │
│  │         REST / GraphQL           │    │
│  └──────────────┬──────────────────┘    │
└─────────────────┼───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│           Business Logic                 │
│  ┌───────────┐  ┌───────────┐           │
│  │ Service A │  │ Service B │           │
│  └─────┬─────┘  └─────┬─────┘           │
└────────┼──────────────┼─────────────────┘
         │              │
         ▼              ▼
┌─────────────────────────────────────────┐
│             Data Layer                   │
│  ┌──────────┐  ┌──────────┐             │
│  │ Database │  │  Cache   │             │
│  └──────────┘  └──────────┘             │
└─────────────────────────────────────────┘
```

### Microservices Layout

```
                    ┌─────────────┐
                    │   Gateway   │
                    └──────┬──────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
         ▼                 ▼                 ▼
┌─────────────┐   ┌─────────────┐   ┌─────────────┐
│  Service A  │   │  Service B  │   │  Service C  │
│             │   │             │   │             │
│ ┌─────────┐ │   │ ┌─────────┐ │   │ ┌─────────┐ │
│ │   DB    │ │   │ │   DB    │ │   │ │   DB    │ │
│ └─────────┘ │   │ └─────────┘ │   │ └─────────┘ │
└─────────────┘   └─────────────┘   └─────────────┘
```

---

## Trust Boundary Diagrams

### Simple Trust Boundary

```
UNTRUSTED ZONE (Internet)
═══════════════════════════════════════════════
                    │
                    │  HTTPS/TLS
                    ▼
              ┌───────────┐
              │  Firewall │
              └─────┬─────┘
                    │
═══════════════════════════════════════════════
TRUSTED ZONE (Internal Network)
                    │
         ┌──────────┴──────────┐
         ▼                     ▼
   ┌───────────┐         ┌───────────┐
   │    App    │────────▶│    DB     │
   └───────────┘         └───────────┘
```

### Multi-Zone Trust Model

```
┌─────────────────────────────────────────────────────┐
│  EXTERNAL ZONE                                       │
│  (Untrusted - Internet)                             │
│                                                      │
│  [End Users]  [Third-party APIs]  [Webhooks]        │
└─────────────────────────┬───────────────────────────┘
                          │
                    Authentication
                          │
                          ▼
┌─────────────────────────────────────────────────────┐
│  DMZ                                                 │
│  (Semi-trusted)                                      │
│                                                      │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐       │
│  │  API GW   │  │   CDN     │  │  WAF      │       │
│  └─────┬─────┘  └───────────┘  └───────────┘       │
└────────┼────────────────────────────────────────────┘
         │
   Authorization
         │
         ▼
┌─────────────────────────────────────────────────────┐
│  INTERNAL ZONE                                       │
│  (Trusted)                                           │
│                                                      │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐       │
│  │  App Srv  │  │  Worker   │  │  Cache    │       │
│  └─────┬─────┘  └───────────┘  └───────────┘       │
└────────┼────────────────────────────────────────────┘
         │
   Encryption at rest
         │
         ▼
┌─────────────────────────────────────────────────────┐
│  DATA ZONE                                           │
│  (Highly Restricted)                                 │
│                                                      │
│  ┌───────────┐  ┌───────────┐                       │
│  │ Database  │  │  Storage  │                       │
│  └───────────┘  └───────────┘                       │
└─────────────────────────────────────────────────────┘
```

---

## Data Flow Diagrams

### Request Flow

```
┌──────────────────────────────────────────────────────┐
│                    REQUEST FLOW                       │
└──────────────────────────────────────────────────────┘

1. User Request
   │
   ▼
┌─────────────┐
│  API Layer  │ ───▶ Validate Auth Token
└──────┬──────┘
       │
2. Route to Handler
       │
       ▼
┌─────────────┐
│   Service   │ ───▶ Business Logic
└──────┬──────┘
       │
3. Data Access
       │
       ▼
┌─────────────┐
│  Database   │ ───▶ Query Execution
└──────┬──────┘
       │
4. Response
       │
       ▼
┌─────────────┐
│   Client    │ ◀─── JSON Response
└─────────────┘
```

### Async Processing Flow

```
┌────────────────────────────────────────────────────────────┐
│                   ASYNC PROCESSING FLOW                     │
└────────────────────────────────────────────────────────────┘

  Producer                    Queue                   Consumer
     │                          │                         │
     │   1. Submit Job          │                         │
     │─────────────────────────▶│                         │
     │                          │   2. Dequeue            │
     │                          │────────────────────────▶│
     │                          │                         │
     │                          │                    3. Process
     │                          │                         │
     │                          │   4. Ack/Complete       │
     │                          │◀────────────────────────│
     │   5. Status Update       │                         │
     │◀─────────────────────────│                         │
     │                          │                         │
```

### Event-Driven Flow

```
┌───────────────────────────────────────────────────────┐
│                  EVENT-DRIVEN FLOW                     │
└───────────────────────────────────────────────────────┘

 Event Source         Event Bus            Subscribers
      │                   │                     │
      │  Publish Event    │                     │
      │──────────────────▶│                     │
      │                   │                     │
      │                   │  Fan-out            │
      │                   │────────────────────▶│ Handler A
      │                   │────────────────────▶│ Handler B
      │                   │────────────────────▶│ Handler C
      │                   │                     │
```

---

## Deployment Diagrams

### Single Instance

```
┌─────────────────────────────────────┐
│         Single Instance              │
│                                      │
│  ┌──────────────────────────────┐   │
│  │        Application           │   │
│  │  ┌──────┐ ┌──────┐ ┌──────┐ │   │
│  │  │ API  │ │Worker│ │ Web  │ │   │
│  │  └──────┘ └──────┘ └──────┘ │   │
│  └──────────────┬───────────────┘   │
│                 │                    │
│  ┌──────────────▼───────────────┐   │
│  │          Database            │   │
│  └──────────────────────────────┘   │
└─────────────────────────────────────┘
```

### Distributed / Queue Mode

```
┌─────────────────────────────────────────────────────────┐
│               Distributed Deployment                     │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌───────────────┐                                      │
│  │ Load Balancer │                                      │
│  └───────┬───────┘                                      │
│          │                                               │
│    ┌─────┴─────┐                                        │
│    │           │                                        │
│    ▼           ▼                                        │
│ ┌──────┐   ┌──────┐        ┌──────────────────────┐   │
│ │ API  │   │ API  │───────▶│    Message Queue      │   │
│ │  1   │   │  2   │        │    (Redis/RabbitMQ)   │   │
│ └──────┘   └──────┘        └──────────┬───────────┘   │
│                                        │               │
│                              ┌─────────┴─────────┐    │
│                              │                   │    │
│                              ▼                   ▼    │
│                          ┌──────┐           ┌──────┐ │
│                          │Worker│           │Worker│ │
│                          │  1   │           │  2   │ │
│                          └──────┘           └──────┘ │
│                                                       │
│  ┌────────────────────────────────────────────────┐  │
│  │              Shared Database                    │  │
│  └────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

### Kubernetes Deployment

```
┌─────────────────────────────────────────────────────────────┐
│                    Kubernetes Cluster                        │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────────────────────────────────────────────────┐     │
│  │                    Ingress                          │     │
│  └───────────────────────┬────────────────────────────┘     │
│                          │                                   │
│      ┌───────────────────┼───────────────────┐              │
│      │                   │                   │              │
│      ▼                   ▼                   ▼              │
│  ┌────────┐         ┌────────┐         ┌────────┐          │
│  │  Pod   │         │  Pod   │         │  Pod   │          │
│  │ (API)  │         │ (API)  │         │(Worker)│          │
│  │ x3     │         │ x3     │         │  x5    │          │
│  └────────┘         └────────┘         └────────┘          │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                   Services                            │   │
│  │  ┌──────────────┐  ┌──────────────┐                  │   │
│  │  │ ClusterIP    │  │ ClusterIP    │                  │   │
│  │  │ (api-svc)    │  │ (worker-svc) │                  │   │
│  │  └──────────────┘  └──────────────┘                  │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  StatefulSets / External Services                     │   │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐     │   │
│  │  │ PostgreSQL │  │   Redis    │  │ S3/MinIO   │     │   │
│  │  └────────────┘  └────────────┘  └────────────┘     │   │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

---

## State Machine Diagrams

### Execution Lifecycle

```
                    ┌───────────┐
                    │  CREATED  │
                    └─────┬─────┘
                          │
                      schedule
                          │
                          ▼
                    ┌───────────┐
       ┌───────────│  PENDING  │───────────┐
       │           └─────┬─────┘           │
       │                 │                 │
    timeout           start             cancel
       │                 │                 │
       ▼                 ▼                 ▼
┌───────────┐     ┌───────────┐     ┌───────────┐
│  TIMEOUT  │     │  RUNNING  │     │ CANCELLED │
└───────────┘     └─────┬─────┘     └───────────┘
                        │
            ┌───────────┼───────────┐
            │           │           │
         success      error       pause
            │           │           │
            ▼           ▼           ▼
     ┌───────────┐ ┌───────────┐ ┌───────────┐
     │ COMPLETED │ │  FAILED   │ │  PAUSED   │
     └───────────┘ └───────────┘ └─────┬─────┘
                                       │
                                    resume
                                       │
                                       ▼
                                 ┌───────────┐
                                 │  RUNNING  │
                                 └───────────┘
```

---

## Entity Relationship Diagrams

### Simple Relationship

```
┌─────────────┐       ┌─────────────┐
│    User     │       │   Project   │
├─────────────┤       ├─────────────┤
│ id          │       │ id          │
│ email       │──────▶│ owner_id    │
│ name        │  1:N  │ name        │
└─────────────┘       └─────────────┘
```

### Complex Relationships

```
┌─────────────┐       ┌─────────────┐       ┌─────────────┐
│    User     │       │   Project   │       │    Task     │
├─────────────┤       ├─────────────┤       ├─────────────┤
│ id       PK │──┐    │ id       PK │──┐    │ id       PK │
│ email       │  │    │ name        │  │    │ title       │
│ org_id   FK │──│──┐ │ org_id   FK │──│──┐ │ project_id  │
└─────────────┘  │  │ └─────────────┘  │  │ │ assignee_id │
                 │  │                   │  │ └─────────────┘
                 │  │  ┌───────────────┘  │        │
                 │  │  │                   │        │
                 │  │  │   ┌───────────────┘        │
                 │  │  │   │                        │
                 │  └──│───│────────────────────────┘
                 │     │   │
                 ▼     ▼   ▼
              ┌─────────────┐
              │Organization │
              ├─────────────┤
              │ id       PK │
              │ name        │
              └─────────────┘
```

---

## Sequence Diagrams (Simplified)

### Authentication Flow

```
Client          API            Auth Service      Database
  │              │                   │               │
  │  1. Login    │                   │               │
  │─────────────▶│                   │               │
  │              │  2. Validate      │               │
  │              │──────────────────▶│               │
  │              │                   │  3. Check     │
  │              │                   │──────────────▶│
  │              │                   │  4. User data │
  │              │                   │◀──────────────│
  │              │  5. Token         │               │
  │              │◀──────────────────│               │
  │  6. JWT      │                   │               │
  │◀─────────────│                   │               │
  │              │                   │               │
```

---

## Tips for Diagram Clarity

1. **Consistent spacing** - Align boxes and arrows
2. **Label connections** - Show what flows between components
3. **Use direction** - Top-to-bottom for flows, left-to-right for data
4. **Minimize crossings** - Rearrange to reduce line intersections
5. **Include legends** - Define symbols if non-obvious
6. **Keep it simple** - One concept per diagram
